<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B√†i T·∫≠p - H·ªçc Vi√™n</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f5f5f5;
            display: flex;
            height: 100vh;
            overflow: hidden;
        }

        .sidebar {
            width: 250px;
            background: #2c3e50;
            color: white;
            display: flex;
            flex-direction: column;
            box-shadow: 2px 0 5px rgba(0,0,0,0.1);
        }

        .sidebar-header {
            padding: 20px;
            background: #34495e;
            text-align: center;
            border-bottom: 1px solid #465a6d;
        }

        .sidebar-header h2 {
            font-size: 18px;
            margin-bottom: 5px;
        }

        .sidebar-header p {
            font-size: 12px;
            color: #95a5a6;
        }

        .sidebar-menu {
            flex: 1;
            overflow-y: auto;
            padding: 10px 0;
        }

        .menu-section {
            margin-bottom: 20px;
        }

        .menu-title {
            padding: 10px 20px;
            font-size: 11px;
            color: #95a5a6;
            text-transform: uppercase;
            font-weight: 600;
        }

        .menu-item {
            padding: 12px 20px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 12px;
            color: #ecf0f1;
            font-size: 14px;
        }

        .menu-item:hover {
            background: #34495e;
            border-left: 3px solid #3498db;
        }

        .menu-item.active {
            background: #34495e;
            border-left: 3px solid #3498db;
        }

        .sidebar-footer {
            padding: 15px 20px;
            background: #34495e;
            border-top: 1px solid #465a6d;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }

        .user-avatar {
            width: 35px;
            height: 35px;
            background: #3498db;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .user-details {
            flex: 1;
        }

        .user-name {
            font-size: 13px;
            font-weight: 600;
        }

        .user-role {
            font-size: 11px;
            color: #95a5a6;
        }

        .btn-logout {
            width: 100%;
            padding: 8px;
            background: #e74c3c;
            border: none;
            border-radius: 4px;
            color: white;
            font-size: 13px;
            cursor: pointer;
            font-weight: 600;
        }

        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .topbar {
            background: white;
            padding: 15px 25px;
            border-bottom: 1px solid #ddd;
        }

        .topbar h1 {
            font-size: 20px;
            color: #333;
            margin-bottom: 5px;
        }

        .breadcrumb {
            font-size: 13px;
            color: #666;
        }

        .content-area {
            flex: 1;
            overflow-y: auto;
            padding: 25px;
        }

        .filter-bar {
            background: white;
            padding: 15px 20px;
            border-radius: 8px;
            border: 1px solid #e0e0e0;
            margin-bottom: 20px;
            display: flex;
            gap: 15px;
        }

        .filter-bar select {
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 13px;
            min-width: 200px;
        }

        .assignments-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }

        .assignment-card {
            background: white;
            border-radius: 8px;
            border: 1px solid #e0e0e0;
            padding: 20px;
            transition: all 0.3s;
        }

        .assignment-card:hover {
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .assignment-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 15px;
        }

        .assignment-title {
            font-size: 18px;
            font-weight: 600;
            color: #333;
            margin-bottom: 5px;
        }

        .assignment-course {
            font-size: 12px;
            color: #666;
        }

        .assignment-desc {
            font-size: 13px;
            color: #666;
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .assignment-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 15px;
            padding: 12px;
            background: #f9f9f9;
            border-radius: 6px;
        }

        .info-item {
            font-size: 12px;
        }

        .info-label {
            color: #999;
            margin-bottom: 3px;
        }

        .info-value {
            color: #333;
            font-weight: 600;
        }

        .assignment-actions {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        .btn {
            padding: 10px 16px;
            border: none;
            border-radius: 6px;
            font-size: 13px;
            cursor: pointer;
            font-weight: 600;
            text-align: center;
        }

        .btn-success { background: #4CAF50; color: white; }
        .btn-primary { background: #3498db; color: white; }
        .btn-sm { padding: 8px 12px; font-size: 12px; }

        .badge {
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
        }

        .badge-danger { background: #ffebee; color: #c62828; }
        .badge-warning { background: #fff3e0; color: #f57c00; }
        .badge-success { background: #e8f5e9; color: #2e7d32; }
        .badge-info { background: #e3f2fd; color: #1976d2; }

        .score-display {
            text-align: center;
            padding: 15px;
            background: #e8f5e9;
            border-radius: 8px;
            margin-bottom: 15px;
        }

        .score-number {
            font-size: 32px;
            font-weight: bold;
            color: #4CAF50;
            margin-bottom: 5px;
        }

        .score-label {
            font-size: 12px;
            color: #666;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 8px;
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            padding: 15px 20px;
            border-bottom: 1px solid #e0e0e0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h3 {
            font-size: 18px;
            color: #333;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #999;
        }

        .modal-body {
            padding: 20px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            color: #333;
            font-size: 13px;
            font-weight: 600;
        }

        .form-control {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 13px;
        }

        .file-upload {
            border: 2px dashed #ddd;
            padding: 30px;
            text-align: center;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .file-upload:hover {
            border-color: #4CAF50;
            background: #f9f9f9;
        }

        .file-upload i {
            font-size: 48px;
            color: #4CAF50;
            margin-bottom: 10px;
        }

        .modal-footer {
            padding: 15px 20px;
            border-top: 1px solid #e0e0e0;
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }
    </style>
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar">
        <div class="sidebar-header">
            <h2>üéì LMS Student</h2>
            <p>Learning Management System</p>
        </div>

        <div class="sidebar-menu">
            <div class="menu-section">
                <div class="menu-title">T·ªîNG QUAN</div>
                <div class="menu-item" onclick="location.href='student-main.html'">
                    <span>üìä</span>
                    <span>Dashboard</span>
                </div>
                <div class="menu-item">
                    <span>üë§</span>
                    <span>Th√¥ng tin c√° nh√¢n</span>
                </div>
            </div>

            <div class="menu-section">
                <div class="menu-title">H·ªåC T·∫¨P</div>
                <div class="menu-item" onclick="location.href='../discover/student-discover.html'">
                    <span>üîç</span>
                    <span>Kh√°m ph√° kh√≥a h·ªçc</span>
                </div>
                <div class="menu-item" onclick="location.href='../courses/student-my-courses.html'">
                    <span>üìö</span>
                    <span>Kh√≥a h·ªçc c·ªßa t√¥i</span>
                </div>
                <div class="menu-item">
                    <span>üìñ</span>
                    <span>ƒêang h·ªçc</span>
                </div>
            </div>

            <div class="menu-section">
                <div class="menu-title">B√ÄI T·∫¨P & KI·ªÇM TRA</div>
                <div class="menu-item active">
                    <span>üìù</span>
                    <span>B√†i t·∫≠p</span>
                </div>
                <div class="menu-item">
                    <span>‚ùì</span>
                    <span>Quiz</span>
                </div>
            </div>

            <div class="menu-section">
                <div class="menu-title">K·∫æT QU·∫¢</div>
                <div class="menu-item">
                    <span>üìà</span>
                    <span>Ti·∫øn ƒë·ªô h·ªçc t·∫≠p</span>
                </div>
                <div class="menu-item" onclick="location.href='../grades/student-grades.html'">
                    <span>üèÜ</span>
                    <span>ƒêi·ªÉm s·ªë</span>
                </div>
                <div class="menu-item">
                    <span>üìú</span>
                    <span>Ch·ª©ng ch·ªâ</span>
                </div>
            </div>

            <div class="menu-section">
                <div class="menu-title">KH√ÅC</div>
                <div class="menu-item">
                    <span>üì¢</span>
                    <span>Th√¥ng b√°o</span>
                </div>
            </div>
        </div>

        <div class="sidebar-footer">
            <div class="user-info">
                <div class="user-avatar">S</div>
                <div class="user-details">
                    <div class="user-name">Student</div>
                    <div class="user-role">H·ªçc vi√™n</div>
                </div>
            </div>
            <button class="btn-logout" onclick="logout()">üö™ ƒêƒÉng xu·∫•t</button>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <div class="topbar">
            <h1>B√†i T·∫≠p</h1>
            <div class="breadcrumb">Trang ch·ªß / B√†i t·∫≠p & Ki·ªÉm tra / B√†i t·∫≠p</div>
        </div>

        <div class="content-area">
            <!-- Filter -->
            <div class="filter-bar">
                <select>
                    <option>T·∫•t c·∫£ kh√≥a h·ªçc</option>
                    <option>L·∫≠p tr√¨nh Web v·ªõi React</option>
                    <option>Python c∆° b·∫£n</option>
                    <option>SQL Server t·ª´ A-Z</option>
                </select>
                <select>
                    <option>T·∫•t c·∫£ tr·∫°ng th√°i</option>
                    <option>Ch∆∞a n·ªôp</option>
                    <option>ƒê√£ n·ªôp</option>
                    <option>ƒê√£ ch·∫•m ƒëi·ªÉm</option>
                </select>
            </div>

            <!-- Assignments Grid -->
            <div class="assignments-grid">
                <!-- Assignment 1 - Pending -->
                <div class="assignment-card">
                    <div class="assignment-header">
                        <div>
                            <div class="assignment-title" id="jsAssignmentTitle">Website E-commerce</div>
                            <div class="assignment-course" id="jsCourseName">üìö L·∫≠p tr√¨nh Web v·ªõi React</div>
                        </div>
                        <span class="badge badge-danger" id="jsDueStatus">S·∫Øp h·∫°n</span>
                    </div>

                    <div class="assignment-desc"id="jsDescription">
                        X√¢y d·ª±ng website b√°n h√†ng tr·ª±c tuy·∫øn ho√†n ch·ªânh v·ªõi ƒë·∫ßy ƒë·ªß ch·ª©c nƒÉng gi·ªè h√†ng, thanh to√°n, qu·∫£n l√Ω s·∫£n ph·∫©m.
                    </div>

                    <div class="assignment-info">
                        <div class="info-item">
                            <div class="info-label">Giao ng√†y:</div>
                            <div class="info-value" id="jsAssignedDate">01/11/2025</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">H·∫°n n·ªôp:</div>
                            <div class="info-value" style="color: #c62828;" id="jsDueDate">18/11/2025</div>
                        </div>
                    </div>

                    <div class="assignment-actions">
                        <button class="btn btn-success" onclick="openSubmitModal('Website E-commerce')">üì§ N·ªôp b√†i</button>
                        <button class="btn btn-primary">üìã Chi ti·∫øt</button>
                    </div>
                </div>

                <!-- Assignment 2 - Submitted -->
                <div class="assignment-card">
                    <div class="assignment-header">
                        <div>
                            <div class="assignment-title">To-do List App</div>
                            <div class="assignment-course">üìö Python c∆° b·∫£n</div>
                        </div>
                        <span class="badge badge-warning">ƒêang ch·∫•m</span>
                    </div>

                    <div class="assignment-desc">
                        X√¢y d·ª±ng ·ª©ng d·ª•ng qu·∫£n l√Ω c√¥ng vi·ªác v·ªõi c√°c ch·ª©c nƒÉng th√™m, s·ª≠a, x√≥a, ƒë√°nh d·∫•u ho√†n th√†nh.
                    </div>

                    <div class="assignment-info">
                        <div class="info-item">
                            <div class="info-label">ƒê√£ n·ªôp:</div>
                            <div class="info-value">14/11/2025</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">H·∫°n n·ªôp:</div>
                            <div class="info-value">20/11/2025</div>
                        </div>
                    </div>

                    <div class="assignment-actions">
                        <button class="btn btn-success">‚úÖ ƒê√£ n·ªôp</button>
                        <button class="btn btn-primary">üëÅÔ∏è Xem b√†i n·ªôp</button>
                    </div>
                </div>

                <!-- Assignment 3 - Graded -->
                <div class="assignment-card">
                    <div class="assignment-header">
                        <div>
                            <div class="assignment-title">Database Design</div>
                            <div class="assignment-course">üìö SQL Server t·ª´ A-Z</div>
                        </div>
                        <span class="badge badge-success">ƒê√£ ch·∫•m</span>
                    </div>

                    <div class="assignment-desc">
                        Thi·∫øt k·∫ø c∆° s·ªü d·ªØ li·ªáu cho h·ªá th·ªëng qu·∫£n l√Ω th∆∞ vi·ªán v·ªõi ƒë·∫ßy ƒë·ªß c√°c b·∫£ng, quan h·ªá v√† r√†ng bu·ªôc.
                    </div>

                    <div class="score-display">
                        <div class="score-number">8.5</div>
                        <div class="score-label">ƒêi·ªÉm</div>
                    </div>

                    <div class="assignment-info">
                        <div class="info-item">
                            <div class="info-label">ƒê√£ n·ªôp:</div>
                            <div class="info-value">08/11/2025</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">Ch·∫•m ng√†y:</div>
                            <div class="info-value">10/11/2025</div>
                        </div>
                    </div>

                    <div class="assignment-actions">
                        <button class="btn btn-primary" onclick="viewFeedback()">üí¨ Xem nh·∫≠n x√©t</button>
                        <button class="btn btn-primary">üëÅÔ∏è Xem b√†i n·ªôp</button>
                    </div>
                </div>

                <!-- Assignment 4 - Pending -->
                <div class="assignment-card">
                    <div class="assignment-header">
                        <div>
                            <div class="assignment-title">Thu·∫≠t to√°n s·∫Øp x·∫øp</div>
                            <div class="assignment-course">üìö Python c∆° b·∫£n</div>
                        </div>
                        <span class="badge badge-info">Ch∆∞a n·ªôp</span>
                    </div>

                    <div class="assignment-desc">
                        C√†i ƒë·∫∑t v√† so s√°nh c√°c thu·∫≠t to√°n s·∫Øp x·∫øp: Bubble Sort, Quick Sort, Merge Sort.
                    </div>

                    <div class="assignment-info">
                        <div class="info-item">
                            <div class="info-label">Giao ng√†y:</div>
                            <div class="info-value">10/11/2025</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">H·∫°n n·ªôp:</div>
                            <div class="info-value">25/11/2025</div>
                        </div>
                    </div>

                    <div class="assignment-actions">
                        <button class="btn btn-success" onclick="openSubmitModal('Thu·∫≠t to√°n s·∫Øp x·∫øp')">üì§ N·ªôp b√†i</button>
                        <button class="btn btn-primary">üìã Chi ti·∫øt</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Submit Modal -->
    <div class="modal" id="submitModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>N·ªôp b√†i t·∫≠p</h3>
                <button class="close-btn" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>T√™n b√†i t·∫≠p</label>
                    <input type="text" class="form-control" id="assignmentName" disabled>
                </div>
                <div class="form-group">
                    <label>File n·ªôp b√†i *</label>
                    <div class="file-upload">
                        <div style="font-size: 48px; margin-bottom: 10px;">üìÅ</div>
                        <p style="color: #333; font-weight: 600; margin-bottom: 5px;">K√©o th·∫£ file v√†o ƒë√¢y ho·∫∑c click ƒë·ªÉ ch·ªçn</p>
                        <p style="font-size: 12px; color: #999;">H·ªó tr·ª£: .zip, .rar, .pdf (T·ªëi ƒëa 50MB)</p>
                    </div>
                </div>
                <div class="form-group">
                    <label>Ghi ch√∫</label>
                    <textarea class="form-control" rows="4" placeholder="Nh·∫≠p ghi ch√∫ n·∫øu c√≥..."></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn" style="background: #999; color: white;" onclick="closeModal()">H·ªßy</button>
                <button class="btn btn-success" onclick="submitAssignment()">üì§ N·ªôp b√†i</button>
            </div>
        </div>
    </div>

    <script>
        function openSubmitModal(assignmentName) {
            document.getElementById('assignmentName').value = assignmentName;
            document.getElementById('submitModal').classList.add('active');
        }

        function closeModal() {
            document.getElementById('submitModal').classList.remove('active');
        }

        function submitAssignment() {
            alert('N·ªôp b√†i th√†nh c√¥ng!\n\nB√†i t·∫≠p c·ªßa b·∫°n ƒë√£ ƒë∆∞·ª£c g·ª≠i ƒë·∫øn gi·∫£ng vi√™n.');
            closeModal();
        }

        function viewFeedback() {
            alert('Nh·∫≠n x√©t c·ªßa gi·∫£ng vi√™n:\n\n"B√†i l√†m t·ªët! Thi·∫øt k·∫ø c∆° s·ªü d·ªØ li·ªáu h·ª£p l√Ω, ƒë·∫ßy ƒë·ªß c√°c r√†ng bu·ªôc. C·∫ßn b·ªï sung th√™m index ƒë·ªÉ t·ªëi ∆∞u query."');
        }

        function logout() {
            if(confirm('B·∫°n c√≥ ch·∫Øc mu·ªën ƒëƒÉng xu·∫•t?')) {
                window.chrome.webview.postMessage("LOGOUT");
            }
        }
        window.chrome.webview.addEventListener('message', event => {
            const jsonString = event.data;

            try {
                // Th·ª≠ ph√¢n t√≠ch c√∫ ph√°p. N·∫øu th·∫•t b·∫°i, c√≥ th·ªÉ ƒë√¢y l√† m·ªôt l·ªánh ƒëi·ªÅu h∆∞·ªõng (nh∆∞ b·∫°n ƒë√£ c·∫•u h√¨nh)
                const data = JSON.parse(jsonString);

                // N·∫øu l√† JSON, ta ƒë·ªï d·ªØ li·ªáu l√™n giao di·ªán
                updateAssignmentCard(data);

            } catch (e) {
                // B·ªè qua ho·∫∑c x·ª≠ l√Ω c√°c chu·ªói kh√¥ng ph·∫£i JSON (v√≠ d·ª•: l·ªánh ƒëi·ªÅu h∆∞·ªõng)
                console.log("Nh·∫≠n th√¥ng ƒëi·ªáp kh√¥ng ph·∫£i JSON:", jsonString);
            }
        });


        function updateAssignmentCard(data) {
            // 2. ƒê·ªï d·ªØ li·ªáu ƒë√£ ƒë∆∞·ª£c parse (data l√† object JS) l√™n c√°c ID HTML
            document.getElementById('jsAssignmentTitle').innerText = data.AssignmentTitle;
            document.getElementById('jsCourseName').innerText = data.CourseName;
            document.getElementById('jsDueStatus').innerText = data.DueStatus;
            document.getElementById('jsDescription').innerText = data.Description;
            document.getElementById('jsAssignedDate').innerText = data.AssignedDate;
            document.getElementById('jsDueDate').innerText = data.DueDate;
        }
        function receiveDataFromCSharp(jsonString) {
            try {
                const data = JSON.parse(jsonString);
                updateAssignmentCard(data);
            } catch (e) {
                console.error("L·ªói khi parse JSON t·ª´ C#:", e);
            }
        }
        // H√†m g·ªçi ng∆∞·ª£c l·∫°i C# ƒë·ªÉ y√™u c·∫ßu ƒëi·ªÅu h∆∞·ªõng (gi·ªëng nh∆∞ logic b·∫°n ƒë√£ c√≥)
        function navigateTo(targetFileName) {
            window.chrome.webview.postMessage(targetFileName);
        }
        
    </script>
</body>
</html>